{"version":3,"file":"confirm.js","sources":["../../../../src/Kit/Feedback/Modal/confirm.tsx"],"sourcesContent":["import React from 'react';\nimport {createRoot} from 'react-dom/client';\nimport {ConfigUpdate, confirmDialogProps} from './types';\nimport ConfirmDialog from './ConfirmDialog';\nimport uuid from 'react-uuid';\nimport {ConfigProvider} from 'antd';\nimport theme from '../../../theme';\n\nexport default function confirm(config: confirmDialogProps) {\n    const container = document.createDocumentFragment();\n    const root = createRoot(container);\n    let portalClassName = 'reactPortal-' + uuid();\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    let currentConfig = {\n        ...config,\n        close,\n        isOpen: true,\n        portalClassName: portalClassName\n    } as any;\n    let timeoutId: NodeJS.Timeout;\n\n    function destroy(...args: any) {\n        const triggerCancel = args.some(param => param && param.triggerCancel);\n        if (config.onCancel && triggerCancel) {\n            config.onCancel();\n        }\n        root.unmount();\n    }\n\n    function render({okText, cancelText, ...props}: any) {\n        clearTimeout(timeoutId);\n\n        timeoutId = setTimeout(() => {\n            const okCancel = props.showSecondaryCta;\n            root.render(\n                <ConfigProvider theme={theme}>\n                    <ConfirmDialog\n                        {...props}\n                        appElement={document.body}\n                        okCancel={okCancel}\n                        parentSelector={() => document.body}\n                        okText={okText}\n                        cancelText={cancelText}\n                    />\n                </ConfigProvider>\n            );\n        }) as unknown as NodeJS.Timeout;\n    }\n\n    function close(...args: any) {\n        //TODO Handle on Cancel\n\n        destroy(args);\n    }\n\n    function update(configUpdate: ConfigUpdate) {\n        if (typeof configUpdate === 'function') {\n            currentConfig = configUpdate(currentConfig);\n        } else {\n            currentConfig = {\n                ...currentConfig,\n                ...configUpdate\n            };\n        }\n        render(currentConfig);\n    }\n    render(currentConfig);\n\n    return {\n        destroy: close,\n        update\n    };\n}\n\nexport function withWarn(props: confirmDialogProps): confirmDialogProps {\n    return {\n        ...props,\n        type: 'warning'\n    };\n}\n\nexport function withInfo(props: confirmDialogProps): confirmDialogProps {\n    return {\n        ...props,\n        type: 'info'\n    };\n}\n\nexport function withSuccess(props: confirmDialogProps): confirmDialogProps {\n    return {\n        ...props,\n        type: 'success'\n    };\n}\n\nexport function withError(props: confirmDialogProps): confirmDialogProps {\n    return {\n        ...props,\n        type: 'error'\n    };\n}\n\nexport function withConfirm(props: confirmDialogProps): confirmDialogProps {\n    return {\n        ...props,\n        type: 'confirm'\n    };\n}\n"],"names":["confirm","config","container","document","createDocumentFragment","root","createRoot","portalClassName","uuid","let","currentConfig","close","isOpen","timeoutId","render","okText","cancelText","props","clearTimeout","setTimeout","okCancel","showSecondaryCta","React","createElement","ConfigProvider","theme","ConfirmDialog","appElement","body","parentSelector","args","triggerCancel","destroy","some","e","param","onCancel","unmount","update","configUpdate","withWarn","type","withInfo","withSuccess","withError","withConfirm"],"mappings":";;;;;;AAQA,SAAwBA,EAAQC,GACtB;AAAA,MAAAC,IAAYC,SAASC;AACrB,QAAAC,IAAOC,EAAWJ,CAAS;AAC7BK,EAAAA,IAAkB,iBAAiBC;AAEvCC,MAAIC,IAAgB,EAChB,GAAGT,GACHU,OAAAA,GACAC,QAAQ,IACRL,iBAAAA,EAAA,GAEAM;AAUJ,WAASC,EAAO,EAACC,QAAAA,GAAQC,YAAAA,GAAAA,GAAeC,KACpCC;AAAAA,iBAAaL,CAAS,GAEtBA,IAAYM,WAAW,MACnB;AAAA,UAAMC,IAAWH,EAAMI;AAClBhB,MAAAA,EAAAS,OACDQ,EAAAC,cAACC,KAAeC,OAAAA,EACZ,GAAAH,EAAAC,cAACG,GAAA,EACI,GAAGT,GACJU,YAAYxB,SAASyB,MACrBR,UAAAA,GACAS,gBAAgB,MAAM1B,SAASyB,MAC/Bb,QAAAA,GACAC,YAAAA,EAAA,CAAA,CAER,CAAA;AAAA,IACJ,CACH;AAAA,EACL;AAEA,WAASL,KAASmB,GA3BRC;AAAAA,SADUD,IA+BhBE,CAAQF,IA9BmBG,KAAK,CAAAC,MAASC,KAASA,EAAMJ,aAAa,GACjE9B,EAAOmC,YAAYL,KACnB9B,EAAOmC,SAAS,GAEpB/B,EAAKgC,QAAQ;AAAA,EA2BjB;AAeO,SAFPvB,EAAOJ,CAAa,GAEb,EACHsB,SAASrB,GACT2B,QAfJ,SAAgBC;AASZzB,IAAAA,EAPIJ,IADA,OAAO6B,KAAiB,aACRA,EAAa7B,CAAa,IAE1B,EACZ,GAAGA,GACH,GAAG6B,EAAA,CAGS;AAAA,EACxB,EAKI;AAER;AAEO,SAASC,EAASvB,GACd;AAAA,SAAA,EACH,GAAGA,GACHwB,MAAM,UAAA;AAEd;AAEO,SAASC,EAASzB,GAAAA;AACd,SAAA,EACH,GAAGA,GACHwB,MAAM,OAAA;AAEd;AAEO,SAASE,EAAY1B,GACjB;AAAA,SAAA,EACH,GAAGA,GACHwB,MAAM,UAAA;AAEd;AAEO,SAASG,EAAU3B;AACf,SAAA,EACH,GAAGA,GACHwB,MAAM,QAAA;AAEd;AAEO,SAASI,EAAY5B,GACjB;AAAA,SAAA,EACH,GAAGA,GACHwB,MAAM,UAAA;AAEd;"}