import { Meta, Canvas } from "@storybook/addon-docs";
import { Controls } from "@storybook/addon-docs";
import Examples, { Sources } from './examples';
import CustomCanvas from '../../../../.storybook/components/CustomCanvas.jsx';
import DesignTokens from '../../../../.storybook/components/DesignTokens';
import fields from '../../../tokens';
import * as KitDatePickerStories from './DatePicker.stories';

<Meta of={KitDatePickerStories} />

<style></style>

# DatePicker

To select or input a date.

## Usage

By clicking the input box, you can select a date from a popup calendar.

## Examples

##### Basic

Basic use case. Users can select or input a date in panel.

<CustomCanvas content={Examples.Basic} source={Sources.Basic} id="datepicker-basic" />

##### Range Picker

Set range picker type by picker prop.

<CustomCanvas content={Examples.Rangepicker} source={Sources.Rangepicker} id="datepicker-range" />

##### Choose Time

This property provide an additional time selection. When `showTime` is an Object, its properties will be passed on to built-in `TimePicker`.

<CustomCanvas content={Examples.Choosetime} source={Sources.Choosetime} id="datepicker-choose-time" />

##### Date Format

We can set the date format by `format`. When `format` is an array, the input box can be entered in any of the valid formats of the array.

<CustomCanvas content={Examples.Dateformat} source={Sources.Dateformat} id="datepicker-date-format" />

##### Disabled Date & Time

Disabled part of dates and time by `disabledDate` and `disabledTime` respectively, and `disabledTime` only works with `showTime`.

<CustomCanvas content={Examples.Disableddate} source={Sources.Disableddate} id="datepicker-disabled-date" />

##### Disabled

A disabled state of the `KitDatePicker`. You can also set as array to disable one of input.

<CustomCanvas content={Examples.Disabled} source={Sources.Disabled} id="datepicker-disabled" />

##### Preset Ranges

We can set preset ranges to RangePicker to improve user experience.

<CustomCanvas content={Examples.Presetrange} source={Sources.Presetrange} id="datepicker-preset-ranges" />

##### Select range dates in 7 days

Using `changeOnBlur` work with `onCalendarChange` and `disabledDate` to limit date selection.

<CustomCanvas content={Examples.Selectrange} source={Sources.Selectrange} id="datepicker-select-range" />

##### Extra Footer

Render extra footer in panel for customized requirements.

<CustomCanvas content={Examples.Extrafooter} source={Sources.Extrafooter} id="datepicker-extra-footer" />

##### Status

Add status to KitDatePicker with `status`, which could be `error` or `warning`.

<CustomCanvas content={Examples.Status} source={Sources.Status} id="datepicker-status" />
##### Label and Helper

Add `label` and/or `helper` properties to give field context.

<CustomCanvas content={Examples.Wrapper} source={Sources.Wrapper} id="datepicker-wrapper" />

##### Read Only

`readonly` mode, also with error.

<CustomCanvas content={Examples.Readonly} source={Sources.Readonly} id="input-readonly" />

##### Customized Cell Rendering

We can customize the rendering of the cells in the calendar by providing a `cellRender` function to `KitDatePicker`.

<CustomCanvas content={Examples.Customcell} source={Sources.Customcell} id="datepicker-custom-cell" />

##### Placement

You can manually specify the position of the popup via `placement`.

<CustomCanvas content={Examples.Placement} source={Sources.Placement} id="datepicker-placement" />

## Api

<Canvas of={KitDatePickerStories.Api} />

<Controls of={KitDatePickerStories.Api} />

## FAQ

<br/>

#### Why does the date picker switch to the date panel after selecting the year instead of the month panel?

After selecting the year, the system directly switches to the date panel instead of month panel. This design is intended to reduce the user's operational burden by allowing them to complete the year modification with just one click, without having to enter the month selection interface again. At the same time, it also avoids additional cognitive burden of remembering the month.

#### How to use DatePicker with customize date library like dayjs?

Please refer [Use custom date library](https://ant.design/docs/react/use-custom-date-library#datepicker)

#### Why config dayjs.locale globally not work?

KitDatePicker default set `locale` as `en` in antd v4. You can config DatePicker `locale` prop or [ConfigProvider](https://ant.design/components/config-provider) `locale` prop instead.

#### Date-related components locale is not working?

See Antd FAQ [Date-related-components-locale-is-not-working?](https://ant.design/docs/react/faq#date-related-components-locale-is-not-working)

#### How to modify start day of week?

Please use correct [language](https://ant.design/docs/react/i18n), or update dayjs `locale` config:

```jsx
    import dayjs from 'dayjs';
    import 'dayjs/locale/zh-cn';
    import updateLocale from 'dayjs/plugin/updateLocale';

    dayjs.extend(updateLocale);
    dayjs.updateLocale('zh-cn', {
        weekStart: 0,
    });
```

#### Why origin panel don't switch when using panelRender?

When you change the layout of nodes by `panelRender`, React will unmount and re-mount it which reset the component state. You should keep the layout stable. Please ref [#27263](https://github.com/ant-design/ant-design/issues/27263) for more info.


## Design Tokens

<DesignTokens path="components.DatePicker" tokens={fields?.components?.DatePicker} />